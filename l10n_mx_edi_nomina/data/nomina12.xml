<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="nomina12">
        <cfdi:Comprobante
            xsi:schemaLocation="http://www.sat.gob.mx/cfd/4 http://www.sat.gob.mx/sitio_internet/cfd/4/cfdv40.xsd http://www.sat.gob.mx/nomina12 http://www.sat.gob.mx/sitio_internet/cfd/nomina/nomina12.xsd"
            xmlns:cfdi="http://www.sat.gob.mx/cfd/4"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:nomina12="http://www.sat.gob.mx/nomina12"
            Version="4.0"
            t-att-Serie="format_string(serie_number,25)"
            t-att-Folio="format_string(serie_number,40)"
            t-att-Fecha="cfdi_date"
            Sello=""
            t-att-NoCertificado="certificate_number"
            t-att-Certificado="certificate_key"
            t-att-SubTotal="format_float(,currency_precision)" Todas las entradas 
            t-att-Descuento="format_float(,currency_precision)" Todas las deducciones positivas
            Moneda="MXN"
            t-att-Total="format_float(,currency_precision)" SUBTOTAL-DESCUENTOS
            TipoComprobante="N"
            Exportacion="01"
            MetodoPago="PUE"
            t-att-LugarExpedicion="issued_address.zip or supplier.zip">
            <t t-if="origin_uuids">
                <cfdi:CfdiRelacionados t-att-TipoRelacion="origin_type">
                    <t t-foreach="origin_uuids" t-as="uuid">
                        <cfdi:CfdiRelacionado t-att-UUID="uuid"/>
                    </t>
                </cfdi:CfdiRelacionados>
            </t>
            <cfdi:Emisor
                t-att-Rfc="supplier.vat"
                t-att-Nombre="format_string(supplier_name, 254)"
                t-att-RegimenFiscal="record.company_id.l10n_mx_edi_fiscal_regime"/>
            <cfdi:Receptor
                t-att-Rfc="customer_rfc"  obtener desde el contact.id del relacionado (maybe)
                t-att-Nombre="format_string(customer_name, 254)"
                t-att-DomicilioFiscalReceptor="customer.zip if customer.country_id.code == 'MX' else issued_address.zip or supplier.zip"
                RegimenFiscalReceptor="605"
                UsoCFDI="CN01"/>
            <cfdi:Conceptos>
                <cfdi:Concepto 
                ClaveProdServ="84111505"
                Cantidad="1"
                ClaveUnidad="ACT"
                Descripcion="Pago de nómina"
                t-att-ValorUnitario="suma total percepciones mas otros pagos"
                t-att-Importe="lo mismo que arriba"
                t-att-Descuento="total deducciones"
                ObjetoImp="01">
                </cfdi:Concepto>
            </cfdi:Conceptos>
            <cfdi:Complemento>
                <nomina12:Nomina 
                Version="1.2"
                t-att-TipoNomina="(O)rdinaria o (E)xtraordinaria"
                t-att-FechaPago="AAAA-MM-DD efectiva de pago"
                t-att-FechaInicialPago="AAAA-MM-DD fecha de inicio del periodo de pago"
                t-att-FechaFinalPago="AAAA-MM-DD fecha de fin del periodo de pago"
                t-att-NumDiasPagados="dias pagados pueden ser fracciones"
                t-att-TotalPercepciones="sumas todas las percepciones"
                t-att-TotalDeducciones="sumas todos los descuentos"
                t-att-TotalOtrosPagados="suma seccion otros pagos como reintegro isr, subsidio, viaticos, aplicacion de saldo a favor. reintegro isr, otros">
                    <nomina12:Emisor
                    t-att-RegistroPatronal="char de hasta 20 caracteres"></nomina12:Emisor> Listo obtener del company_id
                    <nomina12:Receptor 
                    t-att-Curp="curp del trabajador" del hr.employee.contact_curp
                    t-att-NumSeguridadSocial="numero de seguridad social del trabajador" del hr.employee.contact_seg_social
                    t-att-FechaInicioRelLaboral="fecha en la que el trabajador inicio la relacion laboral AAAA-MM-DD"
                    t-att-Antiguedad="P10Y8M15D segun año calendario" calculado desde hr.contract.history.date_hired hasta hoy
                    t-att-TipoContrato="" del hr.contract.contract_type_id.code
                    t-att-Sindicalizado="si o no" del hr.employee.sindicalizado
                    t-att-TipoJornada="" hr.contract.l10n_mx_TipoJornada
                    t-att-TipoRegimen="" del hr.contract.l10n_mx_TipoRegimen
                    t-att-NumEmpleado="" hr.employee.registration_number
                    t-att-Departamento="" hr.employee.department_id.name || hr.contract.department_id.name
                    t-att-Puesto="" hr.employee.(job_title | job_id.name) || hr.contract.job_id.name || 
                    t-att-RiesgoPuesto="" hr.employee.job_id.riesgo_puesto  || hr.contract.job_id.riesgo_puesto
                    t-att-PeriodicidadPago=""
                    t-att-Banco="" opcional
                    t-att-CuentaBancaria="" opcional 123
                    t-att-SalarioBaseCotApor=""opcional  (Salario mensual / 30) * (SalarioDiarioIntegrado (365 + dias aguinaldo + (0.25)Dias de vacaciones)/365) topado a 25 salarios minimos
                    t-att-SalarioDiarioIntegrado=""opcional (Salario mensual / 30) * (SalarioDiarioIntegrado (365 + dias aguinaldo + (0.25)Dias de vacaciones)/365)
                    t-att-ClaveEntFed=""estado en lo que el trabajador presto el servicio
                    ></nomina12:Receptor>


                </nomina12:Nomina>
            </cfdi:Complemento>
        </cfdi:Comprobante>
    </template>
</odoo>