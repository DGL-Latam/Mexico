<odoo>
    <template id="cfdiv33_client_code_inherit" inherit_id="l10n_mx_edi.cfdiv33">
        <xpath expr="//*[local-name()='Concepto']" position="before">
            <t t-if="line.sudo().product_id.customer_ids">
                <t t-set="customer_code" t-value="line.sudo().product_id.customer_ids.filtered(lambda s: s.name == record.commercial_partner_id and s.product_id == line.product_id)[:1]"/>
            </t>
            <t t-if="line.sudo().product_id.variant_customer_ids">
                <t t-set="customer_code" t-value="line.sudo().product_id.variant_customer_ids.filtered(lambda s: s.name == record.commercial_partner_id and s.product_id == line.product_id)[:1]"/>
            </t>
        </xpath>
        <xpath expr="//*[local-name()='Concepto']" position="attributes">
            <t t-if="customer_code and customer_code.product_code">
                <attribute name="t-att-NoIdentificacion">customer_code.product_code</attribute>
                <attribute name="t-att-Descripcion">format_string(line.name, 1000).replace('[','').replace(']','')</attribute>
            </t>
        </xpath>
    </template>
</odoo>